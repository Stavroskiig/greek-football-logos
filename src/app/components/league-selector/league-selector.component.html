<div class="relative">
  <!-- Selected League Display -->
  <button
    type="button"
    (click)="toggleDropdown()"
    class="block w-full px-3 py-2.5 text-sm text-gray-900 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm transition-all duration-200 flex items-center justify-between"
  >
    <div class="flex items-center gap-2">
             <img 
         *ngIf="selectedLeague"
         [src]="getLeagueLogoPath(selectedLeague)" 
         [alt]="selectedLeague + ' logo'"
         class="w-4 h-4 object-contain"
         (error)="onImageError($event)"
       />
      <span>{{ getDisplayName(selectedLeague) }}</span>
    </div>
    <svg class="h-4 w-4 text-gray-400 transition-transform duration-200" 
         [class.rotate-180]="isOpen"
         fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </button>

  <!-- Dropdown Menu -->
  <div 
    *ngIf="isOpen"
    class="absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto"
  >
    <!-- All Leagues Option -->
    <button
      type="button"
      (click)="onLeagueSelect('')"
      class="w-full px-3 py-2 text-sm text-left hover:bg-gray-50 flex items-center gap-2"
    >
      <span>🌍</span>
      <span>All Leagues</span>
    </button>

    <!-- League Options -->
    <button
      *ngFor="let league of leagues$ | async"
      type="button"
      (click)="onLeagueSelect(league)"
      class="w-full px-3 py-2 text-sm text-left hover:bg-gray-50 flex items-center gap-2"
      [class.bg-blue-50]="selectedLeague === league"
    >
             <img 
         [src]="getLeagueLogoPath(league)" 
         [alt]="league + ' logo'"
         class="w-4 h-4 object-contain"
         (error)="onImageError($event)"
       />
      <span>{{ league }}</span>
    </button>
  </div>

  <!-- Backdrop to close dropdown -->
  <div 
    *ngIf="isOpen"
    class="fixed inset-0 z-40"
    (click)="closeDropdown()"
  ></div>
</div> 